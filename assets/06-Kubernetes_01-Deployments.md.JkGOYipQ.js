import{_ as a,o as i,c as n,ag as l}from"./chunks/framework.DhRkhqU-.js";const g=JSON.parse('{"title":"Kubernetes Deployments: Stateless Uygulamalar İçin Standart","description":"","frontmatter":{},"headers":[],"relativePath":"06-Kubernetes/01-Deployments.md","filePath":"06-Kubernetes/01-Deployments.md"}'),e={name:"06-Kubernetes/01-Deployments.md"};function t(r,s,p,h,k,o){return i(),n("div",null,[...s[0]||(s[0]=[l(`<h1 id="kubernetes-deployments-stateless-uygulamalar-icin-standart" tabindex="-1">Kubernetes Deployments: Stateless Uygulamalar İçin Standart <a class="header-anchor" href="#kubernetes-deployments-stateless-uygulamalar-icin-standart" aria-label="Permalink to &quot;Kubernetes Deployments: Stateless Uygulamalar İçin Standart&quot;">​</a></h1><h2 id="_1-giris" tabindex="-1">1. Giriş <a class="header-anchor" href="#_1-giris" aria-label="Permalink to &quot;1. Giriş&quot;">​</a></h2><p><strong>Deployment</strong>, stateless (durumsuz) uygulamaları yönetmek için kullanılan standart Kubernetes nesnesidir. Pod&#39;lar ve ReplicaSet&#39;ler için bildirimsel (declarative) güncellemeler sağlar.</p><p>Deployment içinde <em>istenen durumu (desired state)</em> tanımlarsınız ve Deployment Controller, mevcut durumu kontrollü bir hızda istenen duruma getirir.</p><h3 id="neden-sadece-pod-kullanmıyoruz" tabindex="-1">Neden Sadece Pod Kullanmıyoruz? <a class="header-anchor" href="#neden-sadece-pod-kullanmıyoruz" aria-label="Permalink to &quot;Neden Sadece Pod Kullanmıyoruz?&quot;">​</a></h3><ul><li><strong>Pod&#39;lar geçicidir (ephemeral)</strong>: Bir node ölürse, Pod da ölür.</li><li><strong>ReplicaSet&#39;ler</strong>, belirli sayıda pod&#39;un çalışmasını sağlar ancak güncellemeleri (yeni sürümleri yaymayı) yönetmez.</li><li><strong>Deployment&#39;lar</strong>, rollout (yayılım) ve rollback (geri alma) işlemlerini yönetmek için ReplicaSet&#39;leri kullanır.</li></ul><hr><h2 id="_2-ic-mekanikler-nasıl-calısır" tabindex="-1">2. İç Mekanikler: Nasıl Çalışır? <a class="header-anchor" href="#_2-ic-mekanikler-nasıl-calısır" aria-label="Permalink to &quot;2. İç Mekanikler: Nasıl Çalışır?&quot;">​</a></h2><p>Bir Deployment oluşturduğunuzda, aşağıdaki olay zinciri gerçekleşir:</p><ol><li><strong>Deployment Oluşturulur</strong>: YAML&#39;ı API Sunucusuna gönderirsiniz.</li><li><strong>Controller Manager</strong>: Deployment Controller yeni nesneyi fark eder.</li><li><strong>ReplicaSet Oluşturma</strong>: Deployment, belirli bir hash etiketiyle (örn: <code>pod-template-hash</code>) bir <strong>ReplicaSet</strong> (RS) oluşturur.</li><li><strong>Pod Oluşturma</strong>: ReplicaSet, istenen sayıda <strong>Pod</strong> oluşturur.</li></ol><h3 id="uzlastırma-dongusu-reconcile-loop" tabindex="-1">Uzlaştırma Döngüsü (Reconcile Loop) <a class="header-anchor" href="#uzlastırma-dongusu-reconcile-loop" aria-label="Permalink to &quot;Uzlaştırma Döngüsü (Reconcile Loop)&quot;">​</a></h3><p>Kubernetes her zaman &quot;uzlaştırma&quot; (İstenen vs. Mevcut durumu karşılaştırma) yapar.</p><ul><li><strong>İstenen</strong>: &quot;Nginx v1.14&#39;ten 3 kopya istiyorum&quot;</li><li><strong>Mevcut</strong>: &quot;0 kopya var&quot;</li><li><strong>Eylem</strong>: 3 Pod oluştur.</li></ul><p>Bir imajı güncellediğinizde (v1.14 -&gt; v1.15):</p><ol><li>Deployment, v1.15 için <strong>YENİ</strong> bir ReplicaSet oluşturur.</li><li>Yeni RS&#39;i ölçeklendirir (<strong>UP</strong>) ve eski RS&#39;i kademeli olarak küçültür (<strong>DOWN</strong>) (RollingUpdate).</li></ol><hr><h2 id="_3-yaml-analizi" tabindex="-1">3. YAML Analizi <a class="header-anchor" href="#_3-yaml-analizi" aria-label="Permalink to &quot;3. YAML Analizi&quot;">​</a></h2><p>Prodüksiyon seviyesinde bir Deployment YAML örneği.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend-api</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    tier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">api</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  replicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  revisionHistoryLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Geri alma için 10 eski ReplicaSet sakla</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # template.metadata.labels ile EŞLEŞMELİDİR</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RollingUpdate</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    rollingUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      maxUnavailable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Güncelleme sırasında kapalı olabilecek max pod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      maxSurge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # Güncelleme sırasında fazladan açılabilecek max pod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pod Şablonu</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      containers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">api-container</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-registry/backend:v2.0.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HER ZAMAN kaynakları tanımlayın</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          requests</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;100m&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;128Mi&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          limits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            cpu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;500m&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;512Mi&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        livenessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Ölürse yeniden başlat</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/healthz</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        readinessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Hazır değilse Servis endpoint&#39;lerinden çıkar</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/ready</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">            port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span></code></pre></div><h3 id="onemli-alanlar" tabindex="-1">Önemli Alanlar <a class="header-anchor" href="#onemli-alanlar" aria-label="Permalink to &quot;Önemli Alanlar&quot;">​</a></h3><ul><li><strong><code>spec.selector</code></strong>: Bu Deployment&#39;ın hangi Pod&#39;ları yöneteceğini belirler. Oluşturulduktan sonra <strong>değiştirilemez (Immutable)</strong>.</li><li><strong><code>spec.strategy</code></strong>: Güncellemelerin nasıl yapılacağını kontrol eder (Sıfır kesinti için kritiktir).</li><li><strong><code>spec.template</code></strong>: Pod&#39;ların şablonudur. Buradaki herhangi bir değişiklik bir rollout tetikler.</li></ul><hr><h2 id="_4-dagıtım-stratejileri-deployment-strategies" tabindex="-1">4. Dağıtım Stratejileri (Deployment Strategies) <a class="header-anchor" href="#_4-dagıtım-stratejileri-deployment-strategies" aria-label="Permalink to &quot;4. Dağıtım Stratejileri (Deployment Strategies)&quot;">​</a></h2><h3 id="a-rolling-update-varsayılan-onerilen" tabindex="-1">A. Rolling Update (Varsayılan &amp; Önerilen) <a class="header-anchor" href="#a-rolling-update-varsayılan-onerilen" aria-label="Permalink to &quot;A. Rolling Update (Varsayılan &amp; Önerilen)&quot;">​</a></h3><p>Eski podları kademeli olarak yenileriyle değiştirir.</p><ul><li><strong>En iyisi</strong>: Stateless uygulamalar, sıfır kesinti gereksinimleri.</li><li><strong>Artıları</strong>: Kesinti yok.</li><li><strong>Eksileri</strong>: Uygulama, yayılım sırasında iki versiyonun aynı anda çalışmasını desteklemelidir.</li></ul><h3 id="b-recreate" tabindex="-1">B. Recreate <a class="header-anchor" href="#b-recreate" aria-label="Permalink to &quot;B. Recreate&quot;">​</a></h3><p>TÜM eski podları öldürür, sonra TÜM yeni podları başlatır.</p><ul><li><strong>En iyisi</strong>: Dev ortamları veya aynı anda birden fazla sürümün çalışamayacağı uygulamalar (örn: veritabanı şema çakışmaları).</li><li><strong>Artıları</strong>: Basit, temiz durum.</li><li><strong>Eksileri</strong>: Öldürme ve başlatma arasında <strong>Kesinti (Downtime)</strong> oluşur.</li></ul><h3 id="c-canary-ileri-seviye" tabindex="-1">C. Canary (İleri Seviye) <a class="header-anchor" href="#c-canary-ileri-seviye" aria-label="Permalink to &quot;C. Canary (İleri Seviye)&quot;">​</a></h3><p>Yeni bir sürümü tam yayılımdan önce küçük bir kullanıcı alt kümesine sunmak.</p><ul><li><strong>Native K8s</strong>: Tam olarak bir &quot;strateji&quot; alanı değildir, ancak <strong>aynı Servis</strong> arkasında <strong>iki Deployment</strong> (biri <code>stable</code>, biri <code>canary</code>) oluşturarak elde edilir.</li><li><strong>Otomatik</strong>: <strong>Argo Rollouts</strong> veya <strong>Flagger</strong> gibi araçlar gerçek trafik bölmeli canary dağıtımları sağlar.</li></ul><hr><h2 id="_5-olceklendirme-scaling" tabindex="-1">5. Ölçeklendirme (Scaling) <a class="header-anchor" href="#_5-olceklendirme-scaling" aria-label="Permalink to &quot;5. Ölçeklendirme (Scaling)&quot;">​</a></h2><h3 id="manuel-olceklendirme" tabindex="-1">Manuel Ölçeklendirme <a class="header-anchor" href="#manuel-olceklendirme" aria-label="Permalink to &quot;Manuel Ölçeklendirme&quot;">​</a></h3><p>Emir kipi komutu (acil durumlar için iyidir):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment/backend-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --replicas=5</span></span></code></pre></div><h3 id="horizontal-pod-autoscaler-hpa" tabindex="-1">Horizontal Pod Autoscaler (HPA) <a class="header-anchor" href="#horizontal-pod-autoscaler-hpa" aria-label="Permalink to &quot;Horizontal Pod Autoscaler (HPA)&quot;">​</a></h3><p>Prodüksiyon yöntemi. CPU/Bellek metriklerine göre ölçeklenir.</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">autoscaling/v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HorizontalPodAutoscaler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend-hpa</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  scaleTargetRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">backend-api</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minReplicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  maxReplicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  metrics</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Resource</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cpu</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Utilization</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        averageUtilization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">70</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Ort. CPU &gt; %70 ise büyüt</span></span></code></pre></div><hr><h2 id="_6-sorun-giderme-operasyonlar" tabindex="-1">6. Sorun Giderme &amp; Operasyonlar <a class="header-anchor" href="#_6-sorun-giderme-operasyonlar" aria-label="Permalink to &quot;6. Sorun Giderme &amp; Operasyonlar&quot;">​</a></h2><h3 id="yaygın-komutlar" tabindex="-1">Yaygın Komutlar <a class="header-anchor" href="#yaygın-komutlar" aria-label="Permalink to &quot;Yaygın Komutlar&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">İşlem</th><th style="text-align:left;">Komut</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Durumu Kontrol Et</strong></td><td style="text-align:left;"><code>kubectl rollout status deployment/my-app</code></td></tr><tr><td style="text-align:left;"><strong>Geçmişi Gör</strong></td><td style="text-align:left;"><code>kubectl rollout history deployment/my-app</code></td></tr><tr><td style="text-align:left;"><strong>Geri Al (Undo)</strong></td><td style="text-align:left;"><code>kubectl rollout undo deployment/my-app</code></td></tr><tr><td style="text-align:left;"><strong>Belirli Sürüme Dön</strong></td><td style="text-align:left;"><code>kubectl rollout undo deployment/my-app --to-revision=2</code></td></tr><tr><td style="text-align:left;"><strong>Podları Yeniden Başlat</strong></td><td style="text-align:left;"><code>kubectl rollout restart deployment/my-app</code> (Config güncellemeleri için yararlı)</td></tr></tbody></table><h3 id="pending-veya-crashloopbackoff-hata-ayıklama" tabindex="-1">&quot;Pending&quot; veya &quot;CrashLoopBackOff&quot; Hata Ayıklama <a class="header-anchor" href="#pending-veya-crashloopbackoff-hata-ayıklama" aria-label="Permalink to &quot;&quot;Pending&quot; veya &quot;CrashLoopBackOff&quot; Hata Ayıklama&quot;">​</a></h3><ol><li><strong>Deployment&#39;ı Tanımla (Describe)</strong>: Controller hatalarını kontrol edin (örn: kota aşımı).<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> describe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app</span></span></code></pre></div></li><li><strong>Pod&#39;u Tanımla</strong>: Olayları (events) kontrol edin (zamanlama hataları, imaj çekme hataları).<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> describe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app-xyz</span></span></code></pre></div></li><li><strong>Loglar</strong>: Uygulama loglarını kontrol edin.<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app-xyz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --previous</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Neden çöktüğünü kontrol et</span></span></code></pre></div></li></ol><hr><h2 id="_7-gercek-devops-senaryoları" tabindex="-1">7. Gerçek DevOps Senaryoları <a class="header-anchor" href="#_7-gercek-devops-senaryoları" aria-label="Permalink to &quot;7. Gerçek DevOps Senaryoları&quot;">​</a></h2><h3 id="senaryo-1-sıfır-kesintili-config-guncellemesi" tabindex="-1">Senaryo 1: Sıfır Kesintili Config Güncellemesi <a class="header-anchor" href="#senaryo-1-sıfır-kesintili-config-guncellemesi" aria-label="Permalink to &quot;Senaryo 1: Sıfır Kesintili Config Güncellemesi&quot;">​</a></h3><p><strong>Durum</strong>: Bir ortam değişkenini veya <code>ConfigMap</code>i güncellemeniz gerekiyor. <strong>Çözüm</strong>:</p><ol><li>ConfigMap&#39;i güncelleyin.</li><li>Pod&#39;lar otomatik olarak yeniden yüklenmez.</li><li><code>kubectl rollout restart deployment/my-app</code> çalıştırın.</li><li>K8s, yeni config ile yeni podlar oluşturarak bir RollingUpdate gerçekleştirir.</li></ol><h3 id="senaryo-2-trafik-ani-artıslarını-yonetme" tabindex="-1">Senaryo 2: Trafik Ani Artışlarını Yönetme <a class="header-anchor" href="#senaryo-2-trafik-ani-artıslarını-yonetme" aria-label="Permalink to &quot;Senaryo 2: Trafik Ani Artışlarını Yönetme&quot;">​</a></h3><p><strong>Durum</strong>: Black Friday trafiği. <strong>Çözüm</strong>:</p><ul><li><strong>Ön Ölçeklendirme (Pre-scaling)</strong>: HPA tepki süresi çok yavaşsa etkinlikten önce manuel olarak ölçeklendirin.</li><li><strong>HPA</strong>: HPA <code>maxReplicas</code> değerinin yeterince yüksek olduğundan emin olun.</li></ul><h3 id="senaryo-3-kotu-imaj-geri-alma-rollback" tabindex="-1">Senaryo 3: &quot;Kötü İmaj&quot; Geri Alma (Rollback) <a class="header-anchor" href="#senaryo-3-kotu-imaj-geri-alma-rollback" aria-label="Permalink to &quot;Senaryo 3: &quot;Kötü İmaj&quot; Geri Alma (Rollback)&quot;">​</a></h3><p><strong>Durum</strong>: <code>v2.0</code> sürümünü dağıttınız ancak kritik bir hatası var. <strong>Eylem</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rollout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> undo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment/backend-api</span></span></code></pre></div><p><strong>Sonuç</strong>: K8s, yeni ReplicaSet&#39;i büyütmeyi hemen durdurur ve eski (kararlı) ReplicaSet&#39;i tekrar büyütür.</p>`,58)])])}const y=a(e,[["render",t]]);export{g as __pageData,y as default};
