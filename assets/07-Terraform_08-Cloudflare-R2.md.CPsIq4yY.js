import{_ as a,o as i,c as t,ag as l}from"./chunks/framework.DhRkhqU-.js";const u=JSON.parse('{"title":"02 - Cloudflare R2 (S3 Alternatifi)","description":"","frontmatter":{},"headers":[],"relativePath":"07-Terraform/08-Cloudflare-R2.md","filePath":"07-Terraform/08-Cloudflare-R2.md"}'),n={name:"07-Terraform/08-Cloudflare-R2.md"};function e(r,s,h,k,p,o){return i(),t("div",null,[...s[0]||(s[0]=[l(`<h1 id="_02-cloudflare-r2-s3-alternatifi" tabindex="-1">02 - Cloudflare R2 (S3 Alternatifi) <a class="header-anchor" href="#_02-cloudflare-r2-s3-alternatifi" aria-label="Permalink to &quot;02 - Cloudflare R2 (S3 Alternatifi)&quot;">​</a></h1><p>Cloudflare R2, AWS S3 ile uyumlu (S3-Compatible) çalışan, ancak <strong>Egress (Veri Çıkış) ücreti almayan</strong> bir nesne depolama servisidir. Terraform ile AWS Provider&#39;ını kullanarak R2&#39;yu yönetebilirsiniz.</p><h2 id="neden-r2" tabindex="-1">Neden R2? <a class="header-anchor" href="#neden-r2" aria-label="Permalink to &quot;Neden R2?&quot;">​</a></h2><ul><li><strong>Maliyet:</strong> Veri çıkış ücreti (Egress fee) yoktur. Sadece depolama ve işlem başına ödeme yaparsınız.</li><li><strong>Uyumluluk:</strong> S3 API&#39;sini destekler, yani S3 için yazılmış araçların çoğu R2 ile çalışır.</li><li><strong>Performans:</strong> Cloudflare&#39;in global CDN ağı üzerinde çalışır.</li></ul><h2 id="terraform-ile-r2-kurulumu" tabindex="-1">Terraform ile R2 Kurulumu <a class="header-anchor" href="#terraform-ile-r2-kurulumu" aria-label="Permalink to &quot;Terraform ile R2 Kurulumu&quot;">​</a></h2><p>R2, S3 uyumlu olduğu için Terraform&#39;un <code>aws</code> provider&#39;ını kullanacağız ancak <code>endpoints</code> ayarını Cloudflare&#39;e yönlendireceğiz.</p><h3 id="_1-provider-ayarları" tabindex="-1">1. Provider Ayarları <a class="header-anchor" href="#_1-provider-ayarları" aria-label="Permalink to &quot;1. Provider Ayarları&quot;">​</a></h3><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terraform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  required_providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    aws</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      source  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hashicorp/aws&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;~&gt; 5.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">provider</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;aws&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  region</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # R2 globaldir, region &#39;auto&#39; olmalıdır</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Cloudflare API Token bilgileri</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  access_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CLOUDFLARE_ACCESS_KEY_ID&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  secret_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CLOUDFLARE_SECRET_ACCESS_KEY&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  skip_credentials_validation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  skip_region_validation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  skip_requesting_account_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  endpoints</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Account ID&#39;nizi buraya yazın</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    s3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://&lt;ACCOUNT_ID&gt;.r2.cloudflarestorage.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-bucket-olusturma" tabindex="-1">2. Bucket Oluşturma <a class="header-anchor" href="#_2-bucket-olusturma" aria-label="Permalink to &quot;2. Bucket Oluşturma&quot;">​</a></h3><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resource</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;aws_s3_bucket&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;my_r2_bucket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bucket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;benim-guzel-bucketim&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Global olarak benzersiz olmalı</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Bucket Public Erişim Ayarı (Opsiyonel)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># R2&#39;da varsayılan olarak bucket&#39;lar private&#39;tır.</span></span></code></pre></div><h3 id="_3-dosya-yukleme" tabindex="-1">3. Dosya Yükleme <a class="header-anchor" href="#_3-dosya-yukleme" aria-label="Permalink to &quot;3. Dosya Yükleme&quot;">​</a></h3><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resource</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;aws_s3_object&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;example_file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bucket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aws_s3_bucket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_r2_bucket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;resimler/logo.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./assets/logo.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Content-Type belirtmek önemlidir, yoksa tarayıcılar dosyayı indirir</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  content_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;image/png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="onemli-notlar" tabindex="-1">Önemli Notlar <a class="header-anchor" href="#onemli-notlar" aria-label="Permalink to &quot;Önemli Notlar&quot;">​</a></h2><ol><li><strong>Account ID:</strong> Cloudflare Dashboard&#39;da R2 sayfasının sağ tarafında &quot;Account ID&quot;nizi bulabilirsiniz.</li><li><strong>API Token:</strong> R2 sayfasında &quot;Manage R2 API Tokens&quot; diyerek &quot;Edit Admin&quot; yetkisine sahip bir token oluşturun. Size <code>Access Key ID</code> ve <code>Secret Access Key</code> verecektir.</li><li><strong>Region:</strong> R2&#39;da region kavramı yoktur (Global), ancak Terraform AWS provider&#39;ı bir region beklediği için <code>auto</code> veya <code>us-east-1</code> girilir ve validasyon kapatılır (<code>skip_region_validation</code>).</li></ol><h2 id="s3-vs-r2-karsılastırması" tabindex="-1">S3 vs R2 Karşılaştırması <a class="header-anchor" href="#s3-vs-r2-karsılastırması" aria-label="Permalink to &quot;S3 vs R2 Karşılaştırması&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Özellik</th><th style="text-align:left;">AWS S3</th><th style="text-align:left;">Cloudflare R2</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Depolama Ücreti</strong></td><td style="text-align:left;">Standart ($0.023/GB)</td><td style="text-align:left;">$0.015/GB</td></tr><tr><td style="text-align:left;"><strong>Egress (Çıkış) Ücreti</strong></td><td style="text-align:left;">Pahalı ($0.09/GB)</td><td style="text-align:left;"><strong>Ücretsiz</strong></td></tr><tr><td style="text-align:left;"><strong>API İstek Ücreti</strong></td><td style="text-align:left;">Var</td><td style="text-align:left;">Var (Genelde daha ucuz)</td></tr><tr><td style="text-align:left;"><strong>Tiering (Katmanlama)</strong></td><td style="text-align:left;">Var (Glacier vb.)</td><td style="text-align:left;">Sınırlı</td></tr><tr><td style="text-align:left;"><strong>Entegrasyon</strong></td><td style="text-align:left;">AWS servisleriyle tam uyumlu</td><td style="text-align:left;">Cloudflare Workers ile tam uyumlu</td></tr></tbody></table>`,16)])])}const g=a(n,[["render",e]]);export{u as __pageData,g as default};
