import{_ as i,o as s,c as e,ag as n}from"./chunks/framework.DhRkhqU-.js";const c=JSON.parse('{"title":"Dockerfile Hazırlama ve Best Practices","description":"","frontmatter":{},"headers":[],"relativePath":"02-Docker/03-Dockerfile.md","filePath":"02-Docker/03-Dockerfile.md"}'),l={name:"02-Docker/03-Dockerfile.md"};function t(r,a,k,p,h,o){return s(),e("div",null,[...a[0]||(a[0]=[n(`<h1 id="dockerfile-hazırlama-ve-best-practices" tabindex="-1">Dockerfile Hazırlama ve Best Practices <a class="header-anchor" href="#dockerfile-hazırlama-ve-best-practices" aria-label="Permalink to &quot;Dockerfile Hazırlama ve Best Practices&quot;">​</a></h1><p>Dockerfile, bir Docker imajının nasıl oluşturulacağını tarif eden reçetedir.</p><h2 id="_1-temel-komutlar" tabindex="-1">1. Temel Komutlar <a class="header-anchor" href="#_1-temel-komutlar" aria-label="Permalink to &quot;1. Temel Komutlar&quot;">​</a></h2><ul><li><code>FROM</code>: Baz imajı belirler (Örn: <code>FROM python:3.9</code>). Her Dockerfile bununla başlamalıdır.</li><li><code>WORKDIR</code>: Çalışma dizinini ayarlar (Örn: <code>WORKDIR /app</code>). <code>cd</code> komutu gibidir.</li><li><code>COPY</code>: Dosyaları host makineden imaja kopyalar (Örn: <code>COPY . .</code>).</li><li><code>RUN</code>: İmaj oluşturulurken komut çalıştırır (Örn: <code>RUN pip install flask</code>). Paket yüklemeleri için kullanılır.</li><li><code>CMD</code>: Konteyner başlatıldığında çalışacak varsayılan komuttur (Örn: <code>CMD [&quot;python&quot;, &quot;app.py&quot;]</code>).</li><li><code>EXPOSE</code>: Konteynerin hangi portu dinlediğini belirtir (Sadece dokümantasyon amaçlıdır).</li><li><code>ENV</code>: Ortam değişkeni tanımlar.</li></ul><h2 id="_2-ornek-dockerfile-python-flask" tabindex="-1">2. Örnek Dockerfile (Python Flask) <a class="header-anchor" href="#_2-ornek-dockerfile-python-flask" aria-label="Permalink to &quot;2. Örnek Dockerfile (Python Flask)&quot;">​</a></h2><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Hafif bir baz imaj seç</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> python:3.9-slim</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Çalışma dizinini ayarla</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Önce sadece gereksinimleri kopyala (Cache optimizasyonu için)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requirements.txt .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. Bağımlılıkları yükle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pip install --no-cache-dir -r requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. Kalan kodları kopyala</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> . .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 6. Güvenlik için root olmayan kullanıcı oluştur</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> useradd -m myuser</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myuser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 7. Uygulamayı başlat</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h2 id="_3-best-practices-en-iyi-uygulamalar" tabindex="-1">3. Best Practices (En İyi Uygulamalar) <a class="header-anchor" href="#_3-best-practices-en-iyi-uygulamalar" aria-label="Permalink to &quot;3. Best Practices (En İyi Uygulamalar)&quot;">​</a></h2><h3 id="cache-kullanımı-layer-caching" tabindex="-1">Cache Kullanımı (Layer Caching) <a class="header-anchor" href="#cache-kullanımı-layer-caching" aria-label="Permalink to &quot;Cache Kullanımı (Layer Caching)&quot;">​</a></h3><p>Docker her satırı bir &quot;katman&quot; (layer) olarak kaydeder. Değişmeyen katmanları tekrar build etmez. Bu yüzden, <strong>sık değişen dosyaları (kodlarınız) en sona</strong>, <strong>az değişenleri (paket yükleme) en başa</strong> koyun.</p><h3 id="multi-stage-builds-cok-asamalı-build" tabindex="-1">Multi-Stage Builds (Çok Aşamalı Build) <a class="header-anchor" href="#multi-stage-builds-cok-asamalı-build" aria-label="Permalink to &quot;Multi-Stage Builds (Çok Aşamalı Build)&quot;">​</a></h3><p>İmaj boyutunu küçültmek için harika bir yöntemdir. Derleme (build) araçlarını son imaja dahil etmezsiniz.</p><p><strong>Örnek (Go Uygulaması):</strong></p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Aşama 1: Builder (Derleyici)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> golang:1.19 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> . .</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> go build -o myapp main.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Aşama 2: Runtime (Çalıştırıcı)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alpine:latest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /root/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Sadece derlenmiş binary dosyasını kopyala</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> --from=builder /app/myapp .</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./myapp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><em>Sonuç:</em> 800MB yerine 15MB&#39;lık bir imaj!</p><h3 id="dockerignore" tabindex="-1">.dockerignore <a class="header-anchor" href="#dockerignore" aria-label="Permalink to &quot;.dockerignore&quot;">​</a></h3><p>Git için <code>.gitignore</code> neyse, Docker için de <code>.dockerignore</code> odur. Gereksiz dosyaların (node_modules, .git, loglar) imaja kopyalanmasını engeller. Build süresini hızlandırır.</p>`,16)])])}const y=i(l,[["render",t]]);export{c as __pageData,y as default};
